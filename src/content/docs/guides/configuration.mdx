---
title: Configuration
description: Options de configuration avanc√©es
---

# ‚öôÔ∏è Configuration avanc√©e

Veko.js propose une configuration flexible pour s‚Äôadapter √† tous les besoins.  
Tu peux personnaliser chaque aspect du framework via l‚Äôobjet pass√© au constructeur `App` ou via le fichier `config/app.js`.

## Exemple de configuration compl√®te

```javascript
const { App } = require('veko');

const app = new App({
  port: 3000,                    // Port d'√©coute HTTP
  wsPort: 3008,                  // Port WebSocket (dev)
  viewsDir: 'views',             // Dossier des vues EJS
  staticDir: 'public',           // Dossier des fichiers statiques
  routesDir: 'routes',           // Dossier des routes
  isDev: false,                  // Mode d√©veloppement
  watchDirs: ['views', 'routes', 'public'], // Dossiers √† surveiller (dev)
  errorLog: 'error.log',         // Fichier de logs d'erreur
  showStack: true,               // Afficher la stack trace
  autoInstall: true,             // Installation auto des modules manquants
  layouts: {                     // Configuration des layouts EJS
    enabled: true,
    defaultLayout: 'main',
    layoutsDir: 'views/layouts',
    extension: '.ejs',
    cache: true
  },
  plugins: {                     // Syst√®me de plugins
    enabled: true,
    autoLoad: true,
    pluginsDir: 'plugins'
  },
  prefetch: {                    // Pr√©chargement intelligent
    enabled: true,
    maxConcurrent: 3,
    notifyUser: true,
    cacheRoutes: true,
    prefetchDelay: 1000
  },
  autoUpdater: {                 // Auto-updater r√©volutionnaire
    enabled: true,
    checkOnStart: true,
    autoUpdate: false,
    updateChannel: 'stable',     // stable | beta | alpha
    securityUpdates: true,
    backupCount: 5,
    checkInterval: 3600000,
    rollbackOnFailure: true
  }
});

app.loadRoutes().listen();
```

## Principales options

- **port** : Port HTTP du serveur (par d√©faut : 3000)
- **wsPort** : Port WebSocket pour le hot reload (dev)
- **viewsDir** : Dossier des vues EJS
- **staticDir** : Dossier des fichiers statiques
- **routesDir** : Dossier des routes
- **isDev** : Active le mode d√©veloppement (hot reload, logs d√©taill√©s‚Ä¶)
- **watchDirs** : Dossiers surveill√©s pour le rechargement intelligent
- **errorLog** : Fichier de logs d‚Äôerreur
- **showStack** : Affiche la stack trace en cas d‚Äôerreur
- **autoInstall** : Installe automatiquement les d√©pendances manquantes

### Layouts

```javascript
layouts: {
  enabled: true,              // Active le syst√®me de layouts
  layoutsDir: 'views/layouts',// Dossier des layouts
  defaultLayout: 'main',      // Nom du layout par d√©faut
  extension: '.ejs',          // Extension des fichiers
  sections: ['head', 'header', 'content', 'footer', 'scripts'],
  cache: true                 // Active le cache en production
}
```

### Plugins

```javascript
plugins: {
  enabled: true,          // Active le syst√®me de plugins
  autoLoad: true,         // Chargement automatique des plugins
  pluginsDir: 'plugins'   // Dossier des plugins
}
```

### Auto-Updater

```javascript
autoUpdater: {
  enabled: true,              // Active l‚Äôauto-updater
  checkOnStart: true,         // V√©rifie au d√©marrage
  autoUpdate: false,          // Mode manuel (recommand√©)
  updateChannel: 'stable',    // stable | beta | alpha
  securityUpdates: true,      // Mises √† jour de s√©curit√© auto
  backupCount: 5,             // Nombre de backups √† conserver
  checkInterval: 3600000,     // V√©rification p√©riodique (ms)
  rollbackOnFailure: true     // Restauration auto en cas d‚Äô√©chec
}
```

## Configuration via fichier

Tu peux aussi cr√©er un fichier `config/app.js` pour centraliser la configuration :

```javascript
// config/app.js
module.exports = {
  port: 3000,
  isDev: process.env.NODE_ENV !== 'production',
  // ...autres options
};
```

Puis dans ton `app.js` :

```javascript
const config = require('./config/app');
const { App } = require('veko');
const app = new App(config);
app.loadRoutes().listen();
```

## üîÑ Modifier la configuration √† chaud

Certaines options (plugins, auto-updater, logs‚Ä¶) peuvent √™tre modifi√©es √† chaud via la CLI ou l‚ÄôAPI REST :

```bash
veko update config autoUpdate true
veko update config updateChannel beta
```

## üõ†Ô∏è Bonnes pratiques

- Utilise le mode d√©veloppement (`isDev: true`) pour profiter du hot reload et des logs d√©taill√©s.
- Active le cache des layouts uniquement en production.
- Place tes plugins dans le dossier `plugins/` pour un chargement automatique.
- Utilise le fichier `config/app.js` pour s√©parer la config du code.

---

## üìö Pour aller plus loin

- [Structure du projet](/guides/project-structure)
- [Syst√®me de plugins](/features/plugins)
- [Gestion des layouts](/features/layouts)
- [Auto-Updater](/auto-updater/guide)