---
title: API Auto-Updater
description: API REST pour l'auto-updater
---

# üîå API REST Auto-Updater

L‚Äôauto-updater de Veko.js expose une API REST pour piloter √† distance la v√©rification, l‚Äôinstallation, la configuration et la restauration des mises √† jour.

## ‚ú® Endpoints disponibles

| M√©thode | Endpoint                                 | Description                                 |
|---------|------------------------------------------|---------------------------------------------|
| GET     | `/\_veko/updates/check`                  | V√©rifier s‚Äôil existe une mise √† jour        |
| POST    | `/\_veko/updates/perform`                | Installer la derni√®re mise √† jour           |
| POST    | `/\_veko/updates/rollback`               | Restaurer la version pr√©c√©dente             |
| GET     | `/\_veko/updates/stats`                  | Obtenir les statistiques de l‚Äôauto-updater  |
| GET     | `/\_veko/updates/config`                 | Afficher la configuration actuelle          |
| POST    | `/\_veko/updates/config`                 | Modifier la configuration                   |

## üìñ D√©tail des endpoints

### V√©rifier les mises √† jour

```http
GET /_veko/updates/check
```
**R√©ponse :**
```json
{
  "hasUpdate": true,
  "currentVersion": "1.2.0",
  "latestVersion": "1.3.0",
  "channel": "stable"
}
```

### Installer la derni√®re mise √† jour

```http
POST /_veko/updates/perform
```
**R√©ponse :**
```json
{
  "success": true,
  "message": "Mise √† jour install√©e avec succ√®s",
  "previousVersion": "1.2.0",
  "newVersion": "1.3.0"
}
```

### Restaurer la version pr√©c√©dente (rollback)

```http
POST /_veko/updates/rollback
```
**R√©ponse :**
```json
{
  "success": true,
  "message": "Rollback effectu√©",
  "restoredVersion": "1.2.0"
}
```

### Obtenir les statistiques

```http
GET /_veko/updates/stats
```
**R√©ponse :**
```json
{
  "totalUpdates": 5,
  "successRate": 100,
  "rollbacks": 0,
  "lastUpdate": "2024-06-20T14:32:00Z",
  "channel": "stable"
}
```

### Afficher la configuration

```http
GET /_veko/updates/config
```
**R√©ponse :**
```json
{
  "enabled": true,
  "checkOnStart": true,
  "autoUpdate": false,
  "updateChannel": "stable",
  "securityUpdates": true,
  "backupCount": 5,
  "checkInterval": 3600000,
  "rollbackOnFailure": true
}
```

### Modifier la configuration

```http
POST /_veko/updates/config
Content-Type: application/json

{
  "autoUpdate": true,
  "updateChannel": "beta"
}
```
**R√©ponse :**
```json
{
  "success": true,
  "config": {
    "autoUpdate": true,
    "updateChannel": "beta"
  }
}
```

## üõ†Ô∏è Utilisation en JavaScript

```javascript
// V√©rifier les mises √† jour
const res = await fetch('http://localhost:3000/_veko/updates/check');
const info = await res.json();
if (info.hasUpdate) {
  await fetch('http://localhost:3000/_veko/updates/perform', { method: 'POST' });
}
```

## üîí S√©curit√©

- Les endpoints sont accessibles uniquement en local par d√©faut.
- Pour exposer l‚ÄôAPI √† distance, configure les options de s√©curit√© dans l‚Äôapplication.
- Les op√©rations critiques (update, rollback, config) peuvent n√©cessiter une authentification selon la configuration.

---

## üìö Pour aller plus loin

- [Guide complet](/auto-updater/guide)
- [Configuration de l‚Äôauto-updater](/auto-updater/configuration)