---
title: Rechargement intelligent
description: Hot-reload sÃ©lectif
---

# ğŸ”¥ Rechargement intelligent

Le rechargement intelligent de Veko.js permet de dÃ©velopper sans jamais redÃ©marrer manuellement le serveur.  
Chaque modification de fichier est dÃ©tectÃ©eâ€¯: seules les parties concernÃ©es de lâ€™application sont rechargÃ©es, pour un dÃ©veloppement ultra-rapide et sans coupure.

## âœ¨ FonctionnalitÃ©s

- **Reload sÃ©lectif**â€¯:  
  - Modification dâ€™une route â†’ seule la route est rechargÃ©e
  - Modification dâ€™une vue â†’ rechargement lÃ©ger du template
  - Modification dâ€™un plugin â†’ rechargement du plugin concernÃ©
  - Modification dâ€™un layout â†’ cache vidÃ© et layout rechargÃ©
  - Modification dâ€™un fichier statique â†’ rechargement du navigateur
- **WebSocket intÃ©grÃ©** pour la communication temps rÃ©el entre serveur et navigateur
- **Logs colorÃ©s** pour chaque Ã©vÃ©nement de reload
- **Aucune coupure du serveur**â€¯: les connexions actives ne sont jamais interrompues

## âš™ï¸ Configuration

Active le hot reload en mode dÃ©veloppementâ€¯:

```javascript
const app = new App({
  isDev: true,
  wsPort: 3008, // Port WebSocket pour le hot reload
  watchDirs: ['views', 'routes', 'public', 'plugins'], // Dossiers surveillÃ©s
  layouts: {
    enabled: true,
    defaultLayout: 'main'
  },
  plugins: {
    enabled: true,
    autoLoad: true,
    pluginsDir: 'plugins'
  }
});
```

## ğŸ› ï¸ Fonctionnement

- **Surveillance des fichiers** avec [chokidar](https://www.npmjs.com/package/chokidar)
- **WebSocket** pour notifier le navigateur en temps rÃ©el
- **Script client injectÃ© automatiquement** dans vos pages en mode dev

### Exemple de script client injectÃ©

```javascript
<script>
(function() {
  const ws = new WebSocket('ws://localhost:3008');
  ws.onopen = () => console.log('ğŸ”— Veko.js connectÃ©');
  ws.onmessage = (event) => {
    const data = JSON.parse(event.data);
    switch(data.type) {
      case 'reload':
        console.log('ğŸ”„ Rechargement complet...');
        setTimeout(() => window.location.reload(), 300);
        break;
      case 'route-reload':
        console.log('ğŸ”„ Route rechargÃ©e:', data.route);
        if (window.location.pathname === data.route) {
          setTimeout(() => window.location.reload(), 300);
        }
        break;
      case 'view-reload':
        console.log('ğŸ¨ Vue rechargÃ©e:', data.file);
        setTimeout(() => window.location.reload(), 300);
        break;
      case 'plugin-reload':
        console.log('ğŸ”Œ Plugin rechargÃ©:', data.plugin);
        break;
      case 'layout-reload':
        console.log('ğŸ¨ Layout rechargÃ©:', data.file);
        setTimeout(() => window.location.reload(), 300);
        break;
    }
  };
})();
</script>
```

## ğŸš¦ Types de reload

| Type de fichier      | Action de reload                  |
|----------------------|-----------------------------------|
| Route (`routes/`)    | Reload sÃ©lectif de la route       |
| Vue (`views/`)       | Reload du template EJS            |
| Plugin (`plugins/`)  | Reload du plugin concernÃ©         |
| Layout (`layouts/`)  | Reload du layout et vidage cache  |
| Fichier statique     | Reload navigateur (auto)          |

## ğŸ–¥ï¸ Exemple de logs

```
[14:21:10] ğŸ”„ Route rechargÃ©e routes/users.js
[14:21:11] ğŸ¨ Vue rechargÃ©e views/index.ejs
[14:21:12] ğŸ”Œ Plugin rechargÃ© plugins/auth.js
[14:21:13] ğŸ¨ Layout rechargÃ© views/layouts/main.ejs
[14:21:14] ğŸ“ Fichier statique modifiÃ© public/css/style.css
```

## ğŸ§© Plugins et hot reload

Les plugins bÃ©nÃ©ficient aussi du hot reloadâ€¯: toute modification dâ€™un plugin le recharge instantanÃ©ment, sans redÃ©marrer lâ€™application.

## âš¡ Astuces

- Utilise la commandeâ€¯:  
  ```bash
  veko dev
  ```
  pour activer le mode dÃ©veloppement avec hot reload.
- Ajoute ou retire des dossiers Ã  surveiller via lâ€™option `watchDirs`.
- Les logs de reload sont visibles en console avec des couleurs et des icÃ´nes.

---

## ğŸ“š Pour aller plus loin

- [Journalisation Ã©lÃ©gante](/features/logging)
- [SystÃ¨me de plugins](/features/plugins)
- [Gestion des layouts](/features/layouts)
- [Structure du projet](/guides/project-structure)